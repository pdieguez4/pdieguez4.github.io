
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coldplay</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #1a1a1a;
            color: #fff;
        }
        svg {
            display: block;
            margin: 20px auto;
            background-color: #000;
        }
        .controls {
            margin: 20px;
        }
    </style>
</head>
<body>
    
    <h1>SVG Audio Visualizer</h1>
    <div class="controls">
        <label for="songSelect">Choose Song:</label>
        <select id="songSelect">
            <option value="song1">Magic</option>
            <option value="song2">Song 2</option>
            <!-- Easily add more songs here -->
        </select>
        <br><br>
        <input type="file" id="audioFile" accept="audio/*">
        <br><br>
        <audio id="audioPlayer" controls></audio>
    </div>

    <svg id="svgVisualizer" width="400" height="400" viewBox="0 0 100 100">
<g id="Barret" style="display:none;" fill="hsl(200, 100%, 50%)" >
    <path d="M 95.217985 109.144726 L 93.15106 108.100945 L 91.125146 109.202714 L 91.477835 106.917993 L 89.80461 105.329126 L 92.08479 104.969601 L 93.077242 102.870441 L 94.127108 104.934808 L 96.423692 105.236345 L 94.791477 106.871602 Z M 95.217985 109.144726 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 94.348565 129.162131 L 90.739648 127.329715 L 87.188146 129.266509 L 87.811504 125.276945 L 84.866956 122.493528 L 88.861371 121.844065 L 90.600213 118.19083 L 92.445681 121.797674 L 96.4565 122.319565 L 93.602175 125.184165 Z M 94.348565 129.162131 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 82.332513 117.494976 L 80.11795 116.404805 L 77.960802 117.599354 L 78.313492 115.152267 L 76.500831 113.470619 L 78.945052 113.053107 L 79.978515 110.814776 L 81.126806 113.006717 L 83.587431 113.296656 L 81.856792 115.071084 Z M 82.332513 117.494976 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 100.74619 119.559343 L 142.609623 155.047906 C 143.823531 155.349443 145.086652 154.050515 144.340262 152.73999 L 102.91154 117.66894 C 103.551302 117.80811 100.647765 116.787524 100.74619 119.559343 Z M 100.74619 119.559343 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 108.02964 125.764043 L 108.005033 125.752445 C 109.571631 125.439311 109.834098 124.047603 109.735673 123.479322 L 102.944348 117.541366 C 101.230113 117.23983 100.188448 118.585148 101.148092 119.721709 Z M 108.02964 125.764043 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 101.082475 119.454965 C 102.427617 119.00266 102.79671 118.295208 102.804913 117.576159 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 64.862075 161.043849 C 76.279375 151.16272 105.126102 153.424246 112.073267 160.313202 C 104.09264 167.515293 82.947669 170.217527 64.862075 161.043849 Z M 64.862075 161.043849 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 88.951594 156.996298 C 63.369296 157.425408 75.541188 167.144171 89.279677 165.033413 C 108.480754 165.76406 110.711721 157.158664 88.951594 156.996298 Z M 88.951594 156.996298 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 78.206865 162.911058 C 77.181604 151.765794 73.564485 134.520208 79.182913 133.047317 C 84.957179 132.397853 87.384996 148.646048 89.730792 164.871047 C 92.535904 146.825229 95.62809 134.218671 99.302623 133.859147 C 106.003725 132.432645 102.616265 150.478464 101.082475 163.606912 C 97.6376 164.56951 93.930258 165.033413 90.1573 165.033413 C 86.45816 164.824657 83.005083 164.650693 79.158306 164.302766 C 78.54315 164.325961 78.329896 163.61851 78.206865 162.911058 Z M 78.206865 162.911058 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 81.093998 164.488327 C 79.9211 156.207663 77.870579 140.411773 80.265588 140.66692 C 83.685856 139.321602 85.621548 155.824943 86.384342 164.789864 Z M 81.093998 164.488327 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 93.34791 164.85945 C 95.718313 164.90584 98.753083 164.43034 98.26916 164.337559 C 99.679919 154.491223 101.919088 140.005858 99.25341 140.539347 C 95.185177 139.367992 93.06904 157.668957 93.34791 164.85945 Z M 93.34791 164.85945 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 70.857798 203.259002 C 74.770192 208.75625 100.360692 209.602873 107.04539 203.618527 L 106.151363 180.31901 C 95.021135 184.679696 83.628442 184.436147 72.022494 180.678534 Z M 70.857798 203.259002 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 71.965079 180.655339 C 83.283954 184.412952 96.841998 184.401354 106.175969 180.179839 L 105.831481 170.519064 C 94.824285 172.432662 83.694058 172.01515 72.506417 170.310307 Z M 71.965079 180.655339 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 30.902344 54.25 C 25.027344 58.554688 61.359375 59.53125 53.382812 53.972656 C 42.691406 57.351562 34.386719 54.636719 30.902344 54.25 Z M 30.902344 54.25 "/>
    <path d="M 63.664571 164.325961 C 66.830575 171.342491 105.651035 172.084735 114.60771 165.137791 C 116.10049 174.276676 59.957229 173.917151 63.664571 164.325961 Z M 63.664571 164.325961 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 63.525135 164.940633 C 63.213456 160.336398 68.397173 158.538774 72.301365 157.054285 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 73.933579 160.521959 C 73.81875 163.688095 79.010669 164.639096 86.474565 165.021816 C 95.23439 165.485718 104.888242 164.209986 104.404319 160.452373 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    <path d="M 114.60771 165.624889 C 114.870177 160.487166 108.694008 157.692152 106.512254 157.390615 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
    </g>
    <g id="Cartas" style="display:none;" fill="hsl(200, 100%, 50%)" >
        <path d="M 26.057626 149.323519 L 48.797745 149.316464 C 51.252424 149.32114 53.234002 151.303801 53.233261 153.761509 L 53.237639 196.370938 C 53.236898 198.828646 51.246615 200.814823 48.799792 200.812487 L 26.051817 200.817202 C 23.604994 200.814865 21.61556 198.829865 21.616301 196.372157 L 21.615255 153.751612 C 21.612664 151.30502 23.602947 149.318843 26.057626 149.323519 Z M 26.057626 149.323519 " transform="matrix(0.456456,-0.0960955,0.136825,0.322617,0.385586,-0.59993)"/>
        <path d="M 89.306663 167.962752 C 76.470402 162.233552 72.763061 156.179621 77.101963 151.099886 C 80.16134 149.035518 82.441519 150.960715 84.672486 153.164253 C 84.68889 149.116701 87.100302 147.806176 89.938223 148.165701 C 99.567469 152.027691 92.005148 161.850833 89.306663 167.962752 Z M 89.306663 167.962752 " transform="matrix(0.476251,0,0,0.336816,0.385586,-0.59993)"/>
        <path d="M 68.038661 146.924761 L 67.948438 146.414468 L 68.407754 146.344882 L 69.605259 137.913449 L 73.419227 145.312699 L 73.804725 145.289503 L 74.067192 145.788199 L 72.303744 146.02015 L 72.246329 145.49826 L 72.730252 145.417077 L 72.016671 144.234125 L 69.277175 144.860393 L 69.17875 146.252102 L 69.834917 146.170919 L 69.92514 146.762395 Z M 68.038661 146.924761 " transform="matrix(0.476251,0,0,0.336816,0.385586,-0.59993)"/>
        <path d="M 69.285377 143.978978 L 71.704992 143.468685 L 69.916938 139.919829 Z M 69.285377 143.978978 " transform="matrix(0.476251,0,0,0.336816,0.385586,-0.59993)"/>
        <path d="M 99.739713 175.709928 L 99.64949 175.211233 L 100.108806 175.13005 L 100.904409 167.150922 L 105.120279 174.097866 L 105.505777 174.074671 L 105.768244 174.573366 L 104.004796 174.805318 L 103.947381 174.283427 L 104.431304 174.202244 L 103.717723 173.019292 L 100.978227 173.645561 L 100.879802 175.037269 L 101.535969 174.956086 L 101.634394 175.547562 Z M 99.739713 175.709928 " transform="matrix(0.476251,0,0,0.336816,0.385586,-0.59993)"/>
        <path d="M 100.994631 172.764145 L 103.094365 172.253852 L 101.257098 168.960143 Z M 100.994631 172.764145 " transform="matrix(0.476251,0,0,0.336816,0.385586,-0.59993)"/>
        <path d="M 23.268204 106.536862 L 46.009123 106.530473 C 48.461977 106.533432 50.444151 108.522192 50.447237 110.969944 L 50.444504 153.589858 C 50.44759 156.037611 48.459123 158.02767 46.00627 158.024712 L 23.26535 158.0311 C 20.812497 158.028141 18.830323 156.039381 18.827237 153.591629 L 18.82997 110.971715 C 18.826884 108.523963 20.81535 106.533903 23.268204 106.536862 Z M 23.268204 106.536862 " transform="matrix(0.476155,-0.00677628,0.0105706,0.336733,26.985981,7.150351)"/>
        <path d="M 40.029269 142.305169 C 29.040127 133.543479 26.959624 126.769095 32.4335 122.932286 C 35.907604 121.691872 37.637551 124.122357 39.240681 126.821715 C 40.275347 122.907337 42.938534 122.237057 45.589215 123.295256 C 53.951062 129.432476 44.167465 137.063695 40.029269 142.305169 Z M 40.029269 142.305169 " transform="matrix(0.476186,0.00555461,-0.00785409,0.33677,26.985981,7.150351)"/>
        <path d="M 24.692249 116.622441 L 24.73304 116.111406 L 25.20126 116.15008 L 27.440708 108.190926 L 30.316009 116.402094 L 30.6862 116.465583 L 30.818396 117.020162 L 29.051171 116.805728 L 29.124574 116.282555 L 29.617397 116.320823 L 29.22655 115.004967 L 26.411514 114.923807 L 25.965862 116.25346 L 26.62347 116.335407 L 26.567808 116.939481 Z M 24.692249 116.622441 " transform="matrix(0.476186,0.00555461,-0.00785409,0.33677,26.985981,7.150351)"/>
        <path d="M 26.643581 114.073242 L 28.809784 114.107108 L 27.584617 110.450386 Z M 26.643581 114.073242 " transform="matrix(0.476186,0.00555461,-0.00785409,0.33677,26.985981,7.150351)"/>
        <path d="M 48.194288 152.424143 L 48.234887 151.901512 L 48.695098 151.951917 L 50.931126 144.282798 L 53.809847 152.203931 L 54.188239 152.267284 L 54.320434 152.821863 L 52.55321 152.607429 L 52.626613 152.084257 L 53.119436 152.122525 L 52.720387 150.806804 L 49.905352 150.725644 L 49.467901 152.055162 L 50.125509 152.137109 L 50.069847 152.741182 Z M 48.194288 152.424143 " transform="matrix(0.476186,0.00555461,-0.00785409,0.33677,26.985981,7.150351)"/>
        <path d="M 50.145619 149.874943 L 52.311823 149.908809 L 51.081132 146.414567 Z M 50.145619 149.874943 " transform="matrix(0.476186,0.00555461,-0.00785409,0.33677,26.985981,7.150351)"/>
        <path d="M 122.21279 101.33247 L 144.955193 101.337727 C 147.411442 101.339801 149.396802 103.326611 149.391989 105.776278 L 149.395532 148.399718 C 149.398721 150.847572 147.405634 152.832534 144.957389 152.828647 L 122.217525 152.8347 C 119.761277 152.832627 117.775916 150.845817 117.772727 148.397963 L 117.777187 105.772709 C 117.773998 103.324856 119.759082 101.341707 122.21279 101.33247 Z M 122.21279 101.33247 " transform="matrix(0.464465,0.0744682,-0.104331,0.328635,0,0)"/>
        <path d="M 99.80295 164.627498 C 91.428623 153.331466 91.157954 146.245351 97.432548 143.949032 C 101.115283 143.647495 102.156948 146.430912 103.018167 149.44628 C 105.019475 145.932216 107.767173 145.967009 110.055554 147.671852 C 116.559806 155.755358 105.150708 160.614739 99.80295 164.627498 Z M 99.80295 164.627498 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
        <path d="M 91.57626 135.853928 L 91.748504 135.378428 L 92.183215 135.529197 L 96.399085 128.408289 L 97.063454 137.083271 L 97.407942 137.257234 L 97.391538 137.825515 L 95.742919 137.152856 L 95.947971 136.665758 L 96.407288 136.839722 L 96.366277 135.459611 L 93.667792 134.659379 L 92.896796 135.830733 L 93.511952 136.074282 L 93.3069 136.642563 Z M 91.57626 135.853928 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
        <path d="M 94.118906 133.893939 L 96.202235 134.485415 L 95.947971 130.635022 Z M 94.118906 133.893939 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
        <path d="M 105.101496 176.491812 L 105.265538 176.004714 L 105.70845 176.16708 L 109.834098 169.324514 L 110.58869 177.721154 L 110.933177 177.88352 L 110.916773 178.451801 L 109.259952 177.79074 L 109.473206 177.303642 L 109.932523 177.466008 L 109.891513 176.097494 L 107.193027 175.297262 L 106.422031 176.468617 L 107.037188 176.712166 L 106.832135 177.280447 Z M 105.101496 176.491812 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
        <path d="M 107.63594 174.531823 L 109.719269 175.123299 L 109.432196 171.435272 Z M 107.63594 174.531823 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
        </g>
        <g id="Bola" style="display:none;" fill="hsl(200, 100%, 50%)">
            <path d="M 72.87551 163.525729 C 76.451619 134.868135 116.502392 134.636184 120.51321 163.71129 C 122.063404 198.132876 70.792181 197.483412 72.87551 163.525729 Z M 72.87551 163.525729 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
            <path d="M 77.985408 189.991383 C 80.757713 184.702891 79.806271 186.66288 81.036583 184.08822 C 91.346602 188.251747 102.296383 188.692455 112.5982 183.914256 L 115.263877 189.388309 C 115.854427 190.803212 117.371813 192.39208 115.649375 194.212898 C 108.849848 199.512987 88.402054 201.716525 77.665527 193.980947 C 76.673075 192.682019 77.074977 191.557055 77.985408 189.991383 Z M 77.985408 189.991383 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
            <path d="M 53.332031 53.117188 C 53.332031 52.054688 52.070312 51.1875 50.515625 51.1875 C 48.964844 51.1875 47.703125 52.054688 47.703125 53.117188 C 47.703125 54.183594 48.964844 55.046875 50.515625 55.046875 C 52.070312 55.046875 53.332031 54.183594 53.332031 53.117188 Z M 53.332031 53.117188 "/>
            <path d="M 47.203125 50.964844 C 47.203125 50.394531 46.550781 49.933594 45.742188 49.933594 C 44.9375 49.933594 44.28125 50.394531 44.28125 50.964844 C 44.28125 51.535156 44.9375 52 45.742188 52 C 46.550781 52 47.203125 51.535156 47.203125 50.964844 Z M 47.203125 50.964844 "/>
            <path d="M 46.144531 54.105469 C 46.144531 53.726562 45.71875 53.421875 45.199219 53.421875 C 44.675781 53.421875 44.253906 53.726562 44.253906 54.105469 C 44.253906 54.484375 44.675781 54.789062 45.199219 54.789062 C 45.71875 54.789062 46.144531 54.484375 46.144531 54.105469 Z M 46.144531 54.105469 "/>
            <path d="M 128.116542 180.063863 C 127.845873 177.755947 127.608013 176.201873 123.77764 175.969921 C 123.392142 175.772762 123.482365 175.517616 123.695619 175.40164 C 128.38721 174.311469 127.091281 175.053713 128.198563 170.762612 C 128.313392 170.588649 128.461029 170.588649 128.649677 170.785808 C 129.363258 176.027909 130.938058 174.717384 132.947569 175.35525 C 133.480704 175.517616 133.751373 175.795958 133.004983 175.853945 C 129.445279 176.851336 129.592917 176.12069 128.682485 179.994278 C 128.477433 181.165632 128.182158 180.481376 128.116542 180.063863 Z M 128.116542 180.063863 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
            <path d="M 64.673427 186.581697 C 64.41096 184.412952 64.164898 182.94006 60.301717 182.719707 C 59.908017 182.534145 59.99824 182.290597 60.219696 182.186218 C 64.952298 181.154035 63.648167 181.849889 64.76365 177.802337 C 64.878479 177.651569 65.026117 177.651569 65.214765 177.825532 C 65.936548 182.777694 67.527752 181.536755 69.553667 182.139828 C 70.095004 182.302194 70.365673 182.557341 69.611081 182.615328 C 66.018569 183.554732 66.166206 182.858877 65.255775 186.512112 C 65.042521 187.625478 64.739044 186.976015 64.673427 186.581697 Z M 64.673427 186.581697 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
            <path d="M 112.852465 146.082985 C 112.55719 143.786666 112.286521 142.220994 108.046044 141.989043 C 107.619535 141.803482 107.71796 141.548335 107.955821 141.420762 C 113.155942 140.33059 111.720577 141.072835 112.95089 136.793332 C 113.073921 136.619368 113.237963 136.619368 113.443015 136.804929 C 114.238617 142.047031 115.98566 140.736505 118.208425 141.374372 C 118.798975 141.548335 119.102452 141.815079 118.274042 141.884665 C 114.32884 142.882056 114.492881 142.151409 113.484025 146.013399 C 113.254367 147.184754 112.926283 146.512095 112.852465 146.082985 Z M 112.852465 146.082985 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
            <path d="M 75.852867 157.494993 C 75.418156 153.888149 75.024456 151.452659 68.725256 151.081537 C 68.085494 150.78 68.233131 150.385683 68.594023 150.188524 C 76.303981 148.483682 74.179642 149.643439 76.000504 142.928446 C 76.189152 142.661702 76.435215 142.661702 76.73049 142.963239 C 77.91159 151.174318 80.503448 149.121548 83.808888 150.118939 C 84.678308 150.385683 85.129423 150.814793 83.89911 150.907574 C 78.051025 152.473245 78.288885 151.325086 76.796106 157.390615 C 76.459821 159.223031 75.967696 158.156055 75.852867 157.494993 Z M 75.852867 157.494993 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
            </g>
            <g id="Conill" style="display:none;" fill="hsl(200, 100%, 50%)">
                <path d="M 108.70221 93.789544 C 110.268808 72.392028 132.061744 53.522783 131.832085 76.509166 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 112.425956 94.85652 C 115.723194 75.96408 127.033867 65.213133 127.71464 80.359559 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 114.927592 97.013668 C 148.728377 42.435507 159.932423 96.793315 123.310121 106.767224 C 122.727773 107.938579 123.917075 109.02875 123.58079 110.420459 C 123.096867 112.357253 123.154281 114.259254 122.809794 115.27984 C 122.022394 117.645744 120.808485 119.582539 119.25009 121.229393 C 113.139538 127.642849 105.47059 128.199533 100.147438 127.538471 C 92.822977 126.622263 83.915515 121.739686 83.841696 114.363632 C 83.767877 106.256931 92.273438 95.030484 105.74946 94.496996 C 107.28325 94.439008 109.374781 94.786935 110.555881 95.250838 C 111.96664 95.795924 112.499775 96.52657 114.927592 97.013668 Z M 114.927592 97.013668 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 100.500127 110.466849 C 100.500127 109.388275 99.622504 108.518457 98.548031 108.518457 C 97.473558 108.518457 96.595935 109.388275 96.595935 110.466849 C 96.595935 111.545423 97.473558 112.415241 98.548031 112.415241 C 99.622504 112.415241 100.500127 111.545423 100.500127 110.466849 Z M 100.500127 110.466849 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 84.317417 112.218082 L 88.131385 112.334058 L 88.090375 113.980912 C 88.000152 114.769547 87.729483 115.059486 87.089721 115.987292 C 86.720627 116.300426 86.351533 116.497585 85.98244 116.729536 L 84.629096 116.822317 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 99.122177 127.561666 C 95.193379 140.608932 105.035879 152.438453 117.240579 156.230858 C 117.986969 156.462809 117.347206 155.581394 118.339658 157.112273 C 118.5037 157.379017 118.569317 158.353213 118.807177 158.735933 C 119.282898 159.489775 120.250744 159.930483 121.120165 160.301605 C 126.951846 162.818277 136.81075 161.194618 142.470188 159.617348 C 156.6926 155.662577 169.914358 139.42598 154.223773 125.114579 C 151.886179 122.980626 147.555479 120.301588 143.569267 118.364794 C 142.027275 117.622549 137.918031 115.848121 128.649677 113.528607 C 126.205456 112.913936 124.950538 108.901177 123.326525 107.091956 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 125.655917 151.220708 C 116.658231 136.851319 127.698235 129.939168 137.155237 126.459897 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 128.912144 161.333789 C 109.382983 160.695922 119.676598 147.254339 128.772708 152.299282 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 155.896998 151.626623 C 167.265085 159.907287 174.187644 138.057467 161.61385 136.074282 C 161.941933 140.458164 163.647967 142.870458 155.896998 151.626623 Z M 155.896998 151.626623 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 102.895135 146.477302 C 101.525388 147.289132 101.320335 148.63445 99.942385 149.121548 C 98.572637 149.608646 96.768179 149.388292 95.956173 150.3045 C 90.698638 156.230858 96.636946 159.46658 99.163188 158.156055 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                <path d="M 114.952198 139.924675 C 116.289138 154.618796 112.721231 158.863506 108.062448 160.127641 C 105.659238 160.788703 102.255373 160.382788 100.073619 158.793921 C 96.505713 156.184468 98.014896 149.991366 104.363308 151.580233 C 105.003071 151.742599 105.363962 150.339293 105.888896 149.701426 " transform="matrix(0.476251,0,0,0.336816,0,0)"/>
                </g>
    </svg>
        </g>
    </svg>

    <script>
        const fileInput = document.getElementById('audioFile');
        const audioPlayer = document.getElementById('audioPlayer');
        const songSelect = document.getElementById('songSelect');
        const shapes = {
            Barret: document.getElementById('Barret'),
            Cartas: document.getElementById('Cartas'),
            Bola: document.getElementById('Bola'),
            Conill: document.getElementById('Conill')
        };

        let audioContext, analyser, frequencyData;
        let currentShapeIndex = 0;
        let cycleInterval;

        // Configuration for each song (easily scalable)
        const songConfig = {
            song1: {
                shapeOrder: ['Barret','Cartas','Bola','Conill'],
                durations: [5000, 6000, 7000, 9000,9000, 999999]
            },
            song2: {
                shapeOrder: ['circle', 'heart', 'wepray', 'cross'],
                durations: [4000, 8000, 6000, 10000, 999999]
            }
        };
        fileInput.addEventListener('change', handleFileUpload);
        songSelect.addEventListener('change', resetVisualizer);
        audioPlayer.addEventListener('play', startCycleShapes);
        audioPlayer.addEventListener('pause', stopCycleShapes);
    
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('audio/')) {
                const audioURL = URL.createObjectURL(file);
                audioPlayer.src = audioURL;
                audioPlayer.load();
                initAudio();
            } else {
                alert('Please upload a valid audio file.');
            }
        }
    
        function initAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 256;
            frequencyData = new Uint8Array(analyser.frequencyBinCount);
    
            const source = audioContext.createMediaElementSource(audioPlayer);
            source.connect(analyser);
            analyser.connect(audioContext.destination);
    
            visualize();
        }
    
        function visualize() {
            requestAnimationFrame(visualize);
            analyser.getByteFrequencyData(frequencyData);
    
            const averageFrequency = frequencyData.reduce((a, b) => a + b) / frequencyData.length;
            const scale = averageFrequency / 255;
    
            const selectedShape = shapes[getCurrentShape()];
            const hue = Math.round((averageFrequency / 255) * 360);
            selectedShape.setAttribute('fill', `hsl(${hue}, 100%, 50%)`);
            selectedShape.setAttribute('transform', `scale(${scale + 0.5})`);
        }
    
        function startCycleShapes() {
            const songData = songConfig[songSelect.value];
            updateShapeVisibility();
    
            // Avanzar a la siguiente forma después de la duración actual solo si el audio está reproduciéndose
            cycleTimeout = setTimeout(() => {
                currentShapeIndex = (currentShapeIndex + 1) % songData.shapeOrder.length;
                if (!audioPlayer.paused) {
                    startCycleShapes(); // Recursión controlada para que avance solo al reproducirse
                }
            }, songData.durations[currentShapeIndex]);
        }
    
        function stopCycleShapes() {
            clearTimeout(cycleTimeout); // Detiene el cambio de formas cuando el audio se pausa
        }
    
        function resetVisualizer() {
            clearTimeout(cycleTimeout);
            audioPlayer.currentTime = 0;
            audioPlayer.pause();
            currentShapeIndex = 0;
            updateShapeVisibility();
        }
    
        function getCurrentShape() {
            return songConfig[songSelect.value].shapeOrder[currentShapeIndex];
        }
    
        function updateShapeVisibility() {
            Object.keys(shapes).forEach(key => {
                shapes[key].style.display = key === getCurrentShape() ? 'block' : 'none';
            });
        }
    </script>    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
</body>
</html>
